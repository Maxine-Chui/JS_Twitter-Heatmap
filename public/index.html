<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name='viewport' content='width=device-width,initial-scale=0.1' />
    <title>Twitter Heatmap</title>
    <link rel="stylesheet" href="./css/style.css">

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCMi2fDeIUk6NxNjFeyHEebaeEmku5OSBo&libraries=visualization&callback=initMap" type="text/javascript">
    </script>
    <!-- <script src="./js/twitter_heatmap.js" type="text/javascript"></script> -->
    <script src="./js/twitter_stream.js" type="text/javascript"></script>
    <script src="./js/three.min.js" type="text/javascript"></script>
  </head>
  <body>
    <div class="header">
      <h1>Twitter Heatmap</h1>
      <div class="blurb">Realtime tweets from around the world</div>
    </div>
    <div class="container">
      <div class="about">Twitter Heatmap streams realtime tweets using Twitter Streaming API and maps the coordinates of where the tweets are coming from onto a map. A heatmap is generated based on the concentration of tweets coming from a specific geolocation. Click on the blue dots to read tweets coming in from around the world!</div>
    <form class="search">
      <input id="query" placeholder="Search a hashtag"></input>
      <input id="submit" type="submit" name="" value="Enter"></input>
    </form>
    <div class="body-container">

      <div id="map"></div>

    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <ul class="tweets">
      <script>
      // var regexp = /((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi;
      var socket = io.connect('http://localhost:3000');
        jQuery(function($) {
          var tweetContent = $('ul.tweets');
          socket.on('twitter-stream', function(data){
          tweetContent.prepend('<li>' + data.username + ':' + data.text + '</li>');
        });

      });
      </script>
      </ul>
    </div>
  </div>
  </body>
</html>
